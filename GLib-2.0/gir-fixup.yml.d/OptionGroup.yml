
### OptionGroup ###

# type is reference counted, so free is not needed
- !set-attribute
  name: introspectable
  value: 0
  xpath: gi:repository/gi:namespace/gi:record[@name='OptionGroup']/gi:method[@name='free']

# needs special handling
- !set-attribute
  name: gs:pinvoke-only
  value: 1
  xpath: gi:repository/gi:namespace/gi:record[@name='OptionGroup']/gi:method[@name='add_entries']

# GIR is incorrect, this is an array
- !add-element
  xml: <gi:array zero-terminated='1' c:type='GOptionEntry*' />
  xpath: gi:repository/gi:namespace/gi:record[@name='OptionGroup']/gi:method[@name='add_entries']/gi:parameters/gi:parameter[@name='entries']

# fix the C type of the array element
- !set-attribute
  name: c:type
  value: 1
  xpath: gi:repository/gi:namespace/gi:record[@name='OptionGroup']/gi:method[@name='add_entries']/gi:parameters/gi:parameter[@name='entries']/gi:type

# move the type element so that it is a child of the new array element
- !move-element
  xpath: gi:repository/gi:namespace/gi:record[@name='OptionGroup']/gi:method[@name='add_entries']/gi:parameters/gi:parameter[@name='entries']/gi:type
  new-parent-xpath: gi:repository/gi:namespace/gi:record[@name='OptionGroup']/gi:method[@name='add_entries']/gi:parameters/gi:parameter[@name='entries']/gi:array

# need this to help with marshalling
- !set-attribute
  name: introspectable
  value: 1
  xpath: gi:repository/gi:namespace/gi:record[@name='OptionGroup']/gi:method[@name='set_parse_hooks']

# only used internally
- !set-attribute
  name: gs:pinvoke-only
  value: 1
  xpath: gi:repository/gi:namespace/gi:record[@name='OptionGroup']/gi:method[@name='set_parse_hooks']
